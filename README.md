# **테크스펙: 인터넷 게시판**

## **1. 프로젝트 개요**

### **1.1 프로젝트 이름**
- NestJS-MongoDB 게시판

### **1.2 작성자 및 관련자**
- 작성자: Kim Kyeseung
- 팀원: 백엔드 개발자, 프론트엔드 개발자, 디자이너

### **1.3 배경 및 목적**
- 사용자가 게시글을 작성, 조회, 수정, 삭제(CRUD)할 수 있는 간단한 인터넷 게시판 시스템.
- MongoDB와 NestJS를 활용하여 효율적이고 확장 가능한 백엔드 구조를 설계.
- TypeScript를 통해 타입 안정성을 확보하고 유지보수성을 강화.

---

## **2. 요구 사항**

### **2.1 기능 요구 사항**
1. **게시글 관리**
   - 게시글 작성: 제목, 내용, 작성자 정보 저장.
   - 게시글 조회: 전체 게시글 및 상세 게시글 조회.
   - 게시글 수정: 제목 및 내용을 수정.
   - 게시글 삭제: 특정 게시글 삭제.
2. **댓글 기능**
   - 댓글 작성, 조회, 수정, 삭제.
3. **사용자 인증**
   - JWT를 활용한 로그인 및 인증 시스템.
   - 인증된 사용자만 게시글 작성/수정/삭제 가능.
4. **검색 및 페이징**
   - 게시글 검색 (제목 기준).
   - 게시글 목록 페이징 처리.

### **2.2 비기능 요구 사항**
- **성능**: 초당 1000개의 요청을 처리할 수 있는 성능.
- **보안**: JWT를 활용한 인증 및 MongoDB Injection 방지.
- **확장성**: 서비스 사용자 증가에 따른 수평적 확장이 가능해야 함.

---

## **3. 시스템 설계**

### **3.1 아키텍처**
- **Backend Framework**: NestJS
- **Database**: MongoDB (Mongoose ODM 사용)
- **Authentication**: JWT (Json Web Token)
- **Language**: TypeScript
- **Hosting**: AWS (EC2, S3, RDS) 또는 Heroku

### **3.2 데이터베이스 설계**
#### 게시글 컬렉션 (`posts`)
| 필드 이름       | 타입       | 설명                           |
|-----------------|------------|--------------------------------|
| `_id`           | ObjectId   | 게시글 고유 ID                |
| `title`         | String     | 게시글 제목                   |
| `content`       | String     | 게시글 내용                   |
| `author`        | String     | 작성자                        |
| `createdAt`     | Date       | 생성일                        |
| `updatedAt`     | Date       | 수정일                        |

#### 댓글 컬렉션 (`comments`)
| 필드 이름       | 타입       | 설명                           |
|-----------------|------------|--------------------------------|
| `_id`           | ObjectId   | 댓글 고유 ID                  |
| `postId`        | ObjectId   | 연결된 게시글 ID              |
| `author`        | String     | 작성자                        |
| `content`       | String     | 댓글 내용                     |
| `createdAt`     | Date       | 생성일                        |

#### 사용자 컬렉션 (`users`)
| 필드 이름       | 타입       | 설명                           |
|-----------------|------------|--------------------------------|
| `_id`           | ObjectId   | 사용자 고유 ID                |
| `username`      | String     | 사용자 이름                   |
| `password`      | String     | 비밀번호 (암호화 저장)        |
| `email`         | String     | 이메일                        |
| `createdAt`     | Date       | 가입일                        |

---

## **4. API 설계**

### **4.1 게시글 API**
- `POST /posts`: 게시글 생성
- `GET /posts`: 전체 게시글 조회 (페이징)
- `GET /posts/:id`: 특정 게시글 조회
- `PUT /posts/:id`: 게시글 수정
- `DELETE /posts/:id`: 게시글 삭제

### **4.2 댓글 API**
- `POST /posts/:postId/comments`: 댓글 작성
- `GET /posts/:postId/comments`: 댓글 조회
- `PUT /comments/:id`: 댓글 수정
- `DELETE /comments/:id`: 댓글 삭제

### **4.3 사용자 인증 API**
- `POST /auth/register`: 회원가입
- `POST /auth/login`: 로그인 및 JWT 발급

---

## **5. 구현 계획**

### **5.1 타임라인**
| 기간           | 작업 내용                                      |
|----------------|-----------------------------------------------|
| 1주차          | 요구 사항 분석 및 테크스펙 작성               |
| 2주차          | MongoDB 스키마 설계 및 NestJS 프로젝트 구조 설정 |
| 3주차          | 게시글 및 댓글 CRUD 기능 구현                 |
| 4주차          | JWT 인증 및 사용자 관리 기능 구현             |
| 5주차          | 테스트 및 배포                               |

### **5.2 책임 분담**
- **백엔드**: API 설계 및 구현, MongoDB 스키마 작성.
- **프론트엔드**: UI/UX 설계 및 API 연동.
- **QA**: 테스트 케이스 작성 및 테스트 수행.

---

## **6. 테스트 계획**

### **6.1 테스트 시나리오**
- **게시글 CRUD 테스트**: 게시글 생성, 조회, 수정, 삭제 동작 확인.
- **댓글 기능 테스트**: 댓글 작성, 조회, 수정, 삭제 확인.
- **인증 테스트**: JWT 인증 유효성 및 비인가 요청 처리 확인.
- **검색 및 페이징 테스트**: 대량 데이터에 대한 검색 및 페이징 확인.

### **6.2 테스트 도구**
- **Unit Test**: Jest
- **Integration Test**: Supertest
- **API Documentation**: Swagger

---

## **7. 리스크 관리**
| 리스크 요소                     | 대처 방안                                       |
|--------------------------------|------------------------------------------------|
| 성능 이슈 (대량 트래픽 발생 시) | MongoDB 인덱싱 최적화, 수평 확장 (Sharding)    |
| 보안 문제 (JWT 탈취 등)         | HTTPS 적용, JWT 만료 시간 단축                |
| 개발 일정 지연                  | 우선순위 기능에 집중, MVP 출시 전략 채택       |

---

## **8. 참고 자료**
- [NestJS 공식 문서](https://nestjs.com/)
- [MongoDB 공식 문서](https://www.mongodb.com/docs/)
- [TypeScript 핸드북](https://www.typescriptlang.org/docs/)
- [JWT 소개](https://jwt.io/)
